? bpf_impl.d
? device.defs
? eth-filter
? eth-filter.prof_d
? filter.d
? notify.defs
? notify.sdefs.d
? notifyServer.c
? notifyServer.d
? notify_S.h
? ourdevice.defs
? ourdevice.sdefs.d
? ourdeviceServer.c
? ourdeviceServer.d
? ourdevice_S.h
? pcap_filter.d
? queue.d
? tmp.patch
Index: filter.c
===================================================================
RCS file: /sources/hurd/hurd/eth-filter/Attic/filter.c,v
retrieving revision 1.1.2.8
diff -r1.1.2.8 filter.c
208a209
>   mach_msg_header_t header;
213c214,215
<   device = ports_lookup_port (port_bucket, inp->msgh_local_port, device_portclass);
---
>   device = ports_lookup_port (port_bucket, inp->msgh_local_port,
> 			      device_portclass);
215a218
> 
218a222
>   header = msg->msg_hdr;
220a225
>   msg->msg_hdr = header;
789c794,796
< 	  err = mach_msg ((mach_msg_header_t *)msg, MACH_SEND_MSG,
---
> 	  debug ("before delivering the packet\n");
> 	  err = mach_msg ((mach_msg_header_t *)msg,
> 			  MACH_SEND_MSG,
794,795c801
< 	      fprintf (stderr, "deliver msg: mach_msg: %s\n",
< 		       strerror (err));
---
> 	      error (0, err, "mach_msg");
797a804
> 	  debug ("after delivering the packet\n");
